# MakrCave Backend Environment Configuration
# Copy this file to .env and update with your actual values

# Environment
ENVIRONMENT=production
# Options: development, staging, production

# Database Configuration (REQUIRED)
DATABASE_URL=postgresql://makrcave_user:CHANGE_ME_SECURE_DB_PASSWORD@localhost:5432/makrcave
# For SQLite (development only): sqlite:///./makrcave.db

# Authentication (REQUIRED)
KEYCLOAK_URL=https://auth.makrx.org
KEYCLOAK_REALM=makrx
KEYCLOAK_CLIENT_ID=makrcave-frontend
AUTH_SERVICE_URL=https://auth.makrx.org
JWT_SECRET=CHANGE_ME_SECURE_JWT_SECRET_KEY_256_BITS_MIN
# Generate with: openssl rand -base64 32

# API Keys and Secrets (REQUIRED)
SECRET_KEY=CHANGE_ME_SECURE_SECRET_KEY_FOR_SESSIONS
ENCRYPTION_KEY=CHANGE_ME_32_BYTE_ENCRYPTION_KEY
# Generate with: openssl rand -hex 32

# External Service URLs
STORE_API_URL=https://api.makrx.store
EVENT_SERVICE_URL=https://events.makrx.org
GATEWAY_URL=https://makrx.org

# Payment Processing
STRIPE_PUBLISHABLE_KEY=pk_live_CHANGE_ME
STRIPE_SECRET_KEY=sk_live_CHANGE_ME
STRIPE_WEBHOOK_SECRET=whsec_CHANGE_ME
RAZORPAY_KEY_ID=rzp_live_CHANGE_ME
RAZORPAY_KEY_SECRET=CHANGE_ME_RAZORPAY_SECRET

# Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@makrcave.com
SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD
SMTP_TLS=true
FROM_EMAIL=noreply@makrcave.com

# File Storage
UPLOAD_PATH=/var/uploads/makrcave
MAX_UPLOAD_SIZE=104857600
# Max file size in bytes (100MB default)
ALLOWED_EXTENSIONS=.jpg,.jpeg,.png,.pdf,.stl,.obj,.3mf,.zip

# Redis (for caching and sessions)
REDIS_URL=redis://localhost:6379/1

# Security Settings
CORS_ORIGINS=https://makrcave.com,https://makrx.org,https://makrx.store
ALLOWED_HOSTS=api.makrcave.com,makrcave.com,localhost
SECURE_COOKIES=true
SESSION_TIMEOUT=3600
# Session timeout in seconds (1 hour)

# Rate Limiting (requests per hour)
RATE_LIMIT_AUTH=20
RATE_LIMIT_INVENTORY=200
RATE_LIMIT_EQUIPMENT=100
RATE_LIMIT_PROJECTS=150
RATE_LIMIT_MEMBERS=100
RATE_LIMIT_BILLING=50
RATE_LIMIT_DEFAULT=300

# Logging and Monitoring
LOG_LEVEL=INFO
LOG_FILE=/var/log/makrcave/app.log
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
# Daily at 2 AM (cron format)
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_URL=s3://makrcave-backups

# SSL/TLS
SSL_KEYFILE=/etc/ssl/private/makrcave.key
SSL_CERTFILE=/etc/ssl/certs/makrcave.crt

# Analytics and Metrics
ANALYTICS_ENABLED=true
METRICS_ENDPOINT=/metrics
HEALTH_CHECK_TOKEN=CHANGE_ME_HEALTH_CHECK_SECRET

# Integration Settings
GITHUB_INTEGRATION_ENABLED=false
GITHUB_TOKEN=CHANGE_ME_GITHUB_TOKEN
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/CHANGE_ME

# Development Settings (only for development environment)
DEBUG=false
DB_ECHO=false
# Set to true only in development for SQL query logging

# IMPORTANT SECURITY NOTES:
# 1. Use strong, unique passwords for all accounts
# 2. Generate random secrets: openssl rand -base64 32
# 3. Enable SSL/TLS certificates in production
# 4. Configure firewall to restrict database access
# 5. Regularly rotate API keys and secrets
# 6. Monitor logs for suspicious activity
# 7. Set up automated security updates
# 8. Use environment-specific configurations
# 9. Never expose development settings in production
# 10. Enable audit logging for all critical operations
